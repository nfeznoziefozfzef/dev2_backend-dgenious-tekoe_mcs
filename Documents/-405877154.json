{
  "name" : "RFM score - cannot sort step on calculated columns [Emmanuel Girod]",
  "comment" : "* cannot sort step on calculated columns * cannot add formula using calculated columns!!",
  "modified" : "2019-09-03 22:53:48",
  "requires" : [ "scheme.TRA", "graph.tcpos" ],
  "important" : false,
  "username" : "alebacq",
  "document_id" : -405877154,
  "type" : "REPORT",
  "report" : {"cross_scheme_filters":[{"expression":{"path":"tcpos.CUS","type":"TEXT"},"filter":{"items":[{"comparator":"IS_NOT_NULL","expression":{}}],"and_or":"OR"},"display":"Customer"},{"expression":{"path":"tcpos.bookkeeping_date","type":"DATE"},"filter":{"items":[{"comparator":"IS_GREATER_OR_EQUAL","expression":{"path":"shared.1_year_ago","type":"DATE"},"display":"1 year ago"}],"and_or":"AND"},"display":"Date"}],"properties":{"css":{"header":{"text-transform":"uppercase"}},"active_step":"s3"},"steps":[{"alias":"s0","steps":[{"alias":"s1","steps":[{"alias":"s2","columns":[{"alias":"s2_c0","name":"UID customer","expression":{"path":"source.s1_c0","type":"ID","resettable":false},"resettable":false},{"alias":"s2_c1","name":"Customer name","expression":{"path":"source.s1_c1","type":"TEXT","resettable":false},"properties":{"grouping":"GROUP"},"resettable":false},{"alias":"s2_c2","name":"purchases","expression":{"path":"source.s1_c2","type":"DECIMAL","resettable":false},"properties":{"format":"0,0.00","format_unit":"€","format_pos":"prefix","format_dec_length":2,"format_mand_decimals":true,"format_type":"unit"},"resettable":false},{"alias":"s2_c3","name":"# visits","expression":{"path":"source.s1_c3","type":"INTEGER","resettable":false},"resettable":false},{"alias":"s2_c4","name":"Last visit","expression":{"path":"source.s1_c4","type":"DATE","resettable":false},"properties":{"grouping":"MAX"},"resettable":false},{"alias":"s2_c5","name":"Days elapsed (Today, Last visit)","expression":{"path":"shared.day_difference","parameters":[{"path":"shared.today","type":"DATE"},{"path":"this.s2_c4","type":"DATE","resettable":false}],"type":"INTEGER","resettable":false},"properties":{"format":"0"},"resettable":false},{"alias":"s2_c6","name":"Quintile purch.","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s2_c2","type":"DECIMAL","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"properties":{"format_dec_length":2,"format_mand_decimals":true},"resettable":true},{"alias":"s2_c7","name":"Quintile visits","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s2_c3","type":"INTEGER","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"resettable":true},{"alias":"s2_c8","name":"Quintile recency","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s2_c5","type":"INTEGER","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"resettable":true},{"alias":"s2_c9","name":"RFM score","expression":{"path":"shared.sum","parameters":[{"path":"this.s2_c6","type":"DECIMAL","resettable":true},{"path":"this.s2_c7","type":"DECIMAL","resettable":true},{"path":"this.s2_c8","type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},"resettable":true}],"orderings":[{"column":"s2_c5","order":"DESCENDING"}],"grouping":false,"name":"Step 3","chart":false},{"alias":"s3","columns":[{"alias":"s3_c0","name":"UID customer","expression":{"path":"source.s1_c0","type":"ID","resettable":false},"resettable":false},{"alias":"s3_c1","name":"Customer name","expression":{"path":"source.s1_c1","type":"TEXT","resettable":false},"properties":{"grouping":"GROUP"},"resettable":false},{"alias":"s3_c2","name":"purchases","expression":{"path":"source.s1_c2","type":"DECIMAL","resettable":false},"properties":{"format":"0,0.00","format_unit":"€","format_pos":"prefix","format_dec_length":2,"format_mand_decimals":true,"format_type":"unit"},"resettable":false},{"alias":"s3_c3","name":"# visits","expression":{"path":"source.s1_c3","type":"INTEGER","resettable":false},"resettable":false},{"alias":"s3_c4","name":"Last visit","expression":{"path":"source.s1_c4","type":"DATE","resettable":false},"properties":{"grouping":"MAX"},"resettable":false},{"alias":"s3_c5","name":"Days elapsed (Today, Last visit)","expression":{"path":"shared.day_difference","parameters":[{"path":"shared.today","type":"DATE"},{"path":"this.s3_c4","type":"DATE","resettable":false}],"type":"INTEGER","resettable":false},"properties":{"format":"0"},"resettable":false},{"alias":"s3_c6","name":"Quintile purch.","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s3_c2","type":"DECIMAL","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"properties":{"format_dec_length":2,"format_mand_decimals":true},"resettable":true},{"alias":"s3_c7","name":"Quintile visits","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s3_c3","type":"INTEGER","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"resettable":true},{"alias":"s3_c8","name":"Quintile recency","expression":{"path":"shared.sum","parameters":[{"path":"shared.round","parameters":[{"path":"shared.multiply","parameters":[{"path":"shared.subtract","parameters":[{"type":"INTEGER","value":"1"},{"path":"shared.cum_rank_dist","parameters":[{"path":"this.s3_c5","type":"INTEGER","resettable":false}],"type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"4"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"0"}],"type":"DECIMAL","resettable":true},{"type":"INTEGER","value":"1"}],"type":"DECIMAL","resettable":true},"resettable":true},{"alias":"s3_c9","name":"RFM score","expression":{"path":"shared.sum","parameters":[{"path":"this.s3_c6","type":"DECIMAL","resettable":true},{"path":"this.s3_c7","type":"DECIMAL","resettable":true},{"path":"this.s3_c8","type":"DECIMAL","resettable":true}],"type":"DECIMAL","resettable":true},"resettable":true}],"orderings":[{"column":"s3_c5","order":"DESCENDING"}],"grouping":false,"name":"Copy of Step 3","properties":{},"chart":false}],"columns":[{"alias":"s1_c0","name":"UID customer","grouping":"GROUP","expression":{"path":"source.s0_c0","type":"ID","resettable":false},"resettable":false},{"alias":"s1_c1","name":"Customer name","grouping":"GROUP","expression":{"path":"source.s0_c1","type":"TEXT","resettable":false},"properties":{"grouping":"GROUP"},"resettable":false},{"alias":"s1_c2","name":"purchases","grouping":"SUM","expression":{"path":"source.s0_c2","type":"DECIMAL","resettable":false},"properties":{"format":"0,0.00","format_unit":"€","format_pos":"prefix","format_dec_length":2,"format_mand_decimals":true,"format_type":"unit"},"resettable":false},{"alias":"s1_c3","name":"# visits","grouping":"COUNT","expression":{"path":"source.s0_c3","type":"DATE","resettable":false},"resettable":false},{"alias":"s1_c4","name":"Last visit","grouping":"MAX","expression":{"path":"source.s0_c3","type":"DATE","resettable":false},"properties":{"grouping":"MAX"},"resettable":false}],"grouping":true,"name":"Step 2","chart":false}],"columns":[{"alias":"s0_c0","name":"UID customer","expression":{"path":"tcpos.CUS.CUSTOMER_ID","type":"ID","resettable":false},"resettable":false},{"alias":"s0_c1","name":"Customer name","expression":{"path":"tcpos.CUS.DESCRIPTION","type":"TEXT","resettable":false},"resettable":false},{"alias":"s0_c2","name":"Ticket Amount","expression":{"path":"tcpos.TRA.TOTAL_AMOUNT","type":"DECIMAL","resettable":false},"properties":{"format":"0,0.00","format_unit":"€","format_pos":"prefix","format_dec_length":2,"format_mand_decimals":true,"format_type":"unit"},"resettable":false},{"alias":"s0_c3","name":"Date","expression":{"path":"tcpos.TRA.BOOKKEEPING_DATE","type":"DATE","resettable":false},"resettable":false}],"grouping":false,"name":"Tickets","properties":{"scheme":"Tickets"},"chart":false,"scheme":"TRA"}] },
  "company" : "tekoe_mcs",
  "translatable" : true,
  "folder_id" : -716863279
}